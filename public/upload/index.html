<html>
<head>
  <title>Upload</title>
  <link rel = "stylesheet" type="text/css" href="style.css">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>
<body>
  <a href = "/"><button>back</button></a>

  <div>
    <h1>Upload</h1>
    <input id="title" placeholder="type your title here">
    <br>
    <textarea id="text" placeholder="type your text post here"></textarea>
    <br>
    <button id="submit">Submit</button>
  </div>

</body>
<script>
title_post = document.getElementById("title")
text_post = document.getElementById("text")
submit_btn = document.getElementById("submit")

submit_btn.addEventListener("click", submitPost);

function submitPost() {
  fetch('/api/post/create', {
      credentials: 'include',
      method: 'POST',
      body: JSON.stringify({title: title_post.value, content: text_post.value}),
      headers: new Headers({
        'Content-Type': 'application/json'
      })
    }).then(r => {return r.json()}).then(res => {
      renderItem()
    })
  }

  function renderItem(){
    location.pathname = '/'
  }
</script>
</html>
